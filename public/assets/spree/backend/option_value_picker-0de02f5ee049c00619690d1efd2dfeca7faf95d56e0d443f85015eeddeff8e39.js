$.fn.optionValueAutocomplete=function(e){"use strict";function t(e){return Select2.util.escapeMarkup(e.name)}e=e||{};var n="undefined"==typeof e.multiple||e.multiple,u=e.productSelect;this.select2({minimumInputLength:3,multiple:n,initSelection:function(e,t){$.get(Spree.routes.option_value_search,{ids:e.val().split(","),token:Spree.api_key},function(e){t(n?e:e[0])})},ajax:{url:Spree.routes.option_value_search,datatype:"json",data:function(e){return{q:{name_cont:e,variants_product_id_eq:void 0!==u?$(u).select2("val"):null},token:Spree.api_key}},results:function(e){return{results:e}}},formatResult:t,formatSelection:t})};