(function(){window.initProductActions=function(){var e,o,t,n,r,a,i,l,u;if($(document).on("mouseover","a.delete",function(){return $(this).parent().addClass("action-remove")}),$(document).on("mouseout","a.delete",function(){return $(this).parent().removeClass("action-remove")}),$("#promotion-filters").find(".variant_autocomplete").variantAutocomplete(),$(".calculator-fields").each(function(){var e,o,t,n,r;return e=$(this),t=e.find(".type-select"),o=e.find(".settings"),n=e.find(".warning"),r=t.val(),n.hide(),t.change(function(){return $(this).val()===r?(n.hide(),o.show(),o.find("input").removeProp("disabled")):(n.show(),o.hide(),o.find("input").prop("disabled","disabled"))})}),$(".promo-rule-option-values").length&&(n=HandlebarsTemplates["promotions/rules/option_values_select"],r=HandlebarsTemplates["promotions/rules/option_values"],e=function(e,o){var t,n;n=$(".promo-rule-option-values").find(".param-prefix").data("param-prefix"),$(".js-promo-rule-option-values").append(r({productSelect:{value:e},optionValuesSelect:{value:o},paramPrefix:n})),t=$(".js-promo-rule-option-values .promo-rule-option-value").last(),t.find(".js-promo-rule-option-value-product-select").productAutocomplete({multiple:!1}),t.find(".js-promo-rule-option-value-option-values-select").optionValueAutocomplete({productSelect:".js-promo-rule-option-value-product-select"}),null===e&&t.find(".js-promo-rule-option-value-option-values-select").prop("disabled",!0)},a=$(".js-original-promo-rule-option-values").data("original-option-values"),$(".js-original-promo-rule-option-values").data("loaded")||($.isEmptyObject(a)?e(null,null):$.each(a,e)),$(".js-original-promo-rule-option-values").data("loaded",!0),$(document).on("click",".js-add-promo-rule-option-value",function(o){o.preventDefault(),e(null,null)}),$(document).on("click",".js-remove-promo-rule-option-value",function(){$(this).parents(".promo-rule-option-value").remove()}),$(document).on("change",".js-promo-rule-option-value-product-select",function(){var e,o;e=$(this).parents(".promo-rule-option-value").find("input.js-promo-rule-option-value-option-values-select"),o=$(".promo-rule-option-values").find(".param-prefix").data("param-prefix"),e.attr("name",n({product_id:$(this).val(),param_prefix:o}).trim()),e.prop("disabled",""===$(this).val()).select2("val","")})),$(".js-tiers").length)return o=$(".js-tiers").data("calculator"),l=HandlebarsTemplates["promotions/calculators/fields/"+o],i=$(".js-tiers").data("original-tiers"),t=$(".js-tiers").data("form-prefix"),u=function(e){return t+"[calculator_attributes][preferred_tiers]["+e+"]"},$.each(i,function(e,o){return $(".js-tiers").append(l({baseField:{value:e},valueField:{name:u(e),value:o}}))}),$(document).on("click",".js-add-tier",function(e){return e.preventDefault(),$(".js-tiers").append(l({valueField:{name:null}}))}),$(document).on("click",".js-remove-tier",function(e){return e.preventDefault(),$(this).parents(".tier").remove()}),$(document).on("change",".js-base-input",function(){var e;return e=$(this).parents(".tier").find(".js-value-input"),e.attr("name",u($(this).val()))})},$(initProductActions)}).call(this);