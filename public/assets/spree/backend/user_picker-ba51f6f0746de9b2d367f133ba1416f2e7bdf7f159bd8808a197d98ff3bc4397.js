$.fn.userAutocomplete=function(){"use strict";function e(e){return Select2.util.escapeMarkup(e.email)}this.select2({minimumInputLength:1,multiple:!0,initSelection:function(e,t){Spree.ajax({url:Spree.routes.users_api,data:{ids:e.val()},success:function(e){t(e.users)}})},ajax:{url:Spree.routes.users_api,datatype:"json",params:{headers:{"X-Spree-Token":Spree.api_key}},data:function(e){return{q:{m:"or",email_start:e,addresses_firstname_start:e,addresses_lastname_start:e}}},results:function(e){return{results:e.users,more:e.current_page<e.pages}}},formatResult:e,formatSelection:e})},$(document).ready(function(){$(".user_picker").userAutocomplete()});