(function(){var t;t=function(t,e){return show_flash("error",e.responseText)},Spree.EditStockItemView=Backbone.View.extend({tagName:"tr",initialize:function(t){return this.stockLocationName=t.stockLocationName,this.editing=!1,this.render()},events:{"click .edit":"onEdit","click .submit":"onSubmit","click .cancel":"onCancel"},template:HandlebarsTemplates["stock_items/stock_location_stock_item"],render:function(){var t;return t={stockLocationName:this.stockLocationName,editing:this.editing},_.extend(t,this.model.attributes),this.$el.attr("data-variant-id",this.model.get("variant_id")),this.$el.html(this.template(t)),this},onEdit:function(t){return t.preventDefault(),this.editing=!0,this.render()},onCancel:function(t){return t.preventDefault(),this.model.set(this.model.previousAttributes()),this.editing=!1,this.render()},onSuccess:function(){return this.editing=!1,this.render(),show_flash("success",Spree.translations.updated_successfully)},onSubmit:function(e){var n,i,o;return e.preventDefault(),n=this.$("[name=backorderable]").prop("checked"),i=parseInt(this.$("input[name='count_on_hand']").val(),10),this.model.set({count_on_hand:i,backorderable:n}),o={success:function(t){return function(){return t.onSuccess()}}(this),error:t},this.model.save({force:!0},o)}}),$(function(){return $(".js-edit-stock-item").each(function(){var t,e;return t=$(this),e=new Spree.StockItem(t.data("stock-item")),new Spree.EditStockItemView({el:t,stockLocationName:t.data("stock-location-name"),model:e})})})}).call(this);