(function(){Spree.ready(function(e){var r,n,i,s,t,d;if(e("#checkout_form_address").is("*"))return e(".js-address-fields").show(),e("#checkout_form_address").validate(),n=function(r){return e("#"+r+"country select").val()},s={},t=function(i){var t;if(null!=(t=n(i)))return null==s[t]?e.get(Spree.routes.states_search,{country_id:t},function(e){return s[t]={states:e.states,states_required:e.states_required},r(i)}):r(i)},r=function(r){var i,t,d,a,u,o,l,c,p,h;if(i=n(r),null!=(t=s[i]))return p=t.states_required,c=t.states,u=e("#"+r+"state"),o=u.find("select"),a=u.find("input"),l=u.find('[id$="state-required"]'),c.length>0?(d=parseInt(o.val()),o.html(""),h=[{name:"",id:""}].concat(c),e.each(h,function(r,n){var i;return i=e(document.createElement("option")).attr("value",n.id).html(n.name),d===n.id&&i.prop("selected",!0),o.append(i)}),o.prop("disabled",!1).show(),a.hide().prop("disabled",!0),u.show(),p?(o.addClass("required"),l.show()):(o.removeClass("required"),l.hide()),a.removeClass("required")):(o.hide().prop("disabled",!0),a.show(),p?(l.show(),a.addClass("required")):(a.val(""),l.hide(),a.removeClass("required")),u.toggle(!!p),a.prop("disabled",!p),o.removeClass("required"))},e("#bcountry select").change(function(){return t("b")}),e("#scountry select").change(function(){return t("s")}),t("b"),i=e("input#order_use_billing"),i.change(function(){return d(i)}),(d=function(r){return r.is(":checked")?(e("#shipping .inner").hide(),e("#shipping .inner input, #shipping .inner select").prop("disabled",!0)):(e("#shipping .inner").show(),e("#shipping .inner input, #shipping .inner select").prop("disabled",!1),t("s"))})(i)})}).call(this);