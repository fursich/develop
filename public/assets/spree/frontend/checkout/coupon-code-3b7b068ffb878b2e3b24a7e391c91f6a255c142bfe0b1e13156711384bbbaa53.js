(function(){Spree.onCouponCodeApply=function(){var e,o,r,n,u,p,t;if(o=$("#order_coupon_code"),""!==(e=$.trim(o.val())))return r=$("#coupon_status"),p="success",n="alert",t=Spree.url(Spree.routes.apply_coupon_code(Spree.current_order_id),{order_token:Spree.current_order_token,coupon_code:e}),r.removeClass([p,n].join(" ")),u=Spree.ajax({method:"PUT",url:t}),u.done(function(){return window.location.reload(),o.val(""),r.addClass(p).html("Coupon code applied successfully.")}),u.fail(function(e){var o;return o=e.responseJSON,r.addClass(n).html(o.error)})},Spree.ready(function(e){return e("#coupon-code-apply-button").click(function(e){return Spree.onCouponCodeApply(e)})})}).call(this);