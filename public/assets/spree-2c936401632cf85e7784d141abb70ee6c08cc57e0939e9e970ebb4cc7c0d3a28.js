var Query=function(t){"use strict";var r=function(t){var r,n,e,o,u=[];if(void 0===t||null===t||""===t)return u;for(0===t.indexOf("?")&&(t=t.substring(1)),n=t.toString().split(/[&;]/),r=0;r<n.length;r++)e=n[r],o=e.split("="),u.push([o[0],o[1]]);return u},n=r(t),e=function(){var t,r,e="";for(t=0;t<n.length;t++)r=n[t],e.length>0&&(e+="&"),e+=r.join("=");return e.length>0?"?"+e:e},o=function(t){return t=decodeURIComponent(t),t=t.replace("+"," ")},u=function(t){var r,e;for(e=0;e<n.length;e++)if(r=n[e],o(t)===o(r[0]))return r[1]},i=function(t){var r,e,u=[];for(r=0;r<n.length;r++)e=n[r],o(t)===o(e[0])&&u.push(e[1]);return u},a=function(t,r){var e,u,i,a,c=[];for(e=0;e<n.length;e++)u=n[e],i=o(u[0])===o(t),a=o(u[1])===o(r),(1===arguments.length&&!i||2===arguments.length&&!i&&!a)&&c.push(u);return n=c,this},c=function(t,r,e){return 3===arguments.length&&-1!==e?(e=Math.min(e,n.length),n.splice(e,0,[t,r])):arguments.length>0&&n.push([t,r]),this},s=function(t,r,e){var u,i,s=-1;if(3===arguments.length){for(u=0;u<n.length;u++)if(i=n[u],o(i[0])===o(t)&&decodeURIComponent(i[1])===o(e)){s=u;break}a(t,e).addParam(t,r,s)}else{for(u=0;u<n.length;u++)if(i=n[u],o(i[0])===o(t)){s=u;break}a(t),c(t,r,s)}return this};return{getParamValue:u,getParamValues:i,deleteParam:a,addParam:c,replaceParam:s,toString:e}},Uri=function(t){"use strict";var r=!1,n=function(t){for(var n={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],o={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},u=n[r?"strict":"loose"].exec(t),i={},a=14;a--;)i[e[a]]=u[a]||"";return i[o.name]={},i[e[12]].replace(o.parser,function(t,r,n){r&&(i[o.name][r]=n)}),i},e=n(t||""),o=new Query(e.query),u=function(t){return void 0!==t&&(e.protocol=t),e.protocol},i=null,a=function(t){return void 0!==t&&(i=t),null===i?-1!==e.source.indexOf("//"):i},c=function(t){return void 0!==t&&(e.userInfo=t),e.userInfo},s=function(t){return void 0!==t&&(e.host=t),e.host},f=function(t){return void 0!==t&&(e.port=t),e.port},l=function(t){return void 0!==t&&(e.path=t),e.path},d=function(t){return void 0!==t&&(o=new Query(t)),o},h=function(t){return void 0!==t&&(e.anchor=t),e.anchor},p=function(t){return u(t),this},g=function(t){return a(t),this},m=function(t){return c(t),this},y=function(t){return s(t),this},v=function(t){return f(t),this},P=function(t){return l(t),this},w=function(t){return d(t),this},x=function(t){return h(t),this},Q=function(t){return d().getParamValue(t)},S=function(t){return d().getParamValues(t)},j=function(t,r){return 2===arguments.length?d().deleteParam(t,r):d().deleteParam(t),this},U=function(t,r,n){return 3===arguments.length?d().addParam(t,r,n):d().addParam(t,r),this},b=function(t,r,n){return 3===arguments.length?d().replaceParam(t,r,n):d().replaceParam(t,r),this},k=function(){var t="",r=function(t){return null!==t&&""!==t};return r(u())?(t+=u(),u().indexOf(":")!==u().length-1&&(t+=":"),t+="//"):a()&&r(s())&&(t+="//"),r(c())&&r(s())&&(t+=c(),c().indexOf("@")!==c().length-1&&(t+="@")),r(s())&&(t+=s(),r(f())&&(t+=":"+f())),r(l())?t+=l():r(s())&&(r(d().toString())||r(h()))&&(t+="/"),r(d().toString())&&(0!==d().toString().indexOf("?")&&(t+="?"),t+=d().toString()),r(h())&&(0!==h().indexOf("#")&&(t+="#"),t+=h()),t};return{protocol:u,hasAuthorityPrefix:a,userInfo:c,host:s,port:f,path:l,query:d,anchor:h,setProtocol:p,setHasAuthorityPrefix:g,setUserInfo:m,setHost:y,setPort:v,setPath:P,setQuery:w,setAnchor:x,getQueryParamValue:Q,getQueryParamValues:S,deleteQueryParam:j,addQueryParam:U,replaceQueryParam:b,toString:k,clone:function(){return new Uri(k())}}},jsUri=Uri;(function(){window.Spree=function(){function t(){}return t.ready=function(t){return"undefined"!=typeof Turbolinks&&Turbolinks.supported?jQuery(document).on("turbolinks:load",function(){return t(jQuery)}):jQuery(document).ready(t)},t.mountedAt=function(){return"/"},t.pathFor=function(t){return""+(window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""))+this.mountedAt()+t},t.url=function(r,n){return"development"!==t.env&&"test"!==t.env||console.warn("Spree.url is deprecated, please use Spree.ajax for your request instead."),void 0===r.path&&(r=new Uri(r)),n&&$.each(n,function(t,n){return r.addQueryParam(t,n)}),r},t.ajax=function(r,n){return"object"==typeof r&&(n=r,r=void 0),n=n||{},n=$.extend(n,{headers:{"X-Spree-Token":t.api_key}}),$.ajax(r,n)},t.routes={states_search:t.pathFor("api/states"),apply_coupon_code:function(r){return t.pathFor("api/orders/"+r+"/apply_coupon_code")}},t.getJSON=function(t,r,n){return"function"==typeof r&&(n=r,r=void 0),this.ajax({dataType:"json",url:t,data:r,success:n})},t}()}).call(this);